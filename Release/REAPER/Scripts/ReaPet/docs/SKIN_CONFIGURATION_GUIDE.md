# æ–°çš®è‚¤é…ç½®æŒ‡å— (Skin Configuration Guide)

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä¸º ReaPet æ·»åŠ æ–°çš„ PNG å›¾å±‚çš®è‚¤ã€‚æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼Œå‡†å¤‡å¥½èµ„æºåï¼ŒAI åŠ©æ‰‹å¯ä»¥è‡ªåŠ¨å®Œæˆé…ç½®ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

### 1. èµ„æºæ–‡ä»¶å‡†å¤‡

åœ¨ `assets/skins/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ `your_skin_base/`ï¼Œå¹¶å‡†å¤‡ä»¥ä¸‹ PNG æ–‡ä»¶ï¼š

#### å¿…éœ€æ–‡ä»¶ï¼ˆ6ä¸ªï¼‰

- `your_skin_base_desk.png` - æ¡Œé¢å›¾å±‚
- `your_skin_base_head.png` - å¤´éƒ¨å›¾å±‚
- `your_skin_base_face.png` - æ­£å¸¸çŠ¶æ€çš„è¡¨æƒ…å›¾å±‚
- `your_skin_base_rest.png` - ä¼‘æ¯çŠ¶æ€çš„è¡¨æƒ…å›¾å±‚ï¼ˆé—­çœ¼+è…®çº¢ï¼‰
- `your_skin_base_hand_left.png` - å·¦æ‰‹å›¾å±‚
- `your_skin_base_hand_right.png` - å³æ‰‹å›¾å±‚

#### å¯é€‰æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰

- `your_skin_base.png` - å®Œæ•´é¢„è§ˆå›¾ï¼ˆç”¨äºå•†åº—ç•Œé¢æ˜¾ç¤ºï¼‰

### 2. å›¾ç‰‡è§„æ ¼è¦æ±‚

- **ç”»å¸ƒå°ºå¯¸**ï¼šå»ºè®®ä½¿ç”¨æ­£æ–¹å½¢ç”»å¸ƒï¼ˆå¦‚ 1024x1024 æˆ– 2048x2048ï¼‰
- **æ ¼å¼**ï¼šPNGï¼Œæ”¯æŒé€æ˜é€šé“
- **å›¾å±‚å¯¹é½**ï¼šæ‰€æœ‰å›¾å±‚åº”ä½¿ç”¨ç›¸åŒçš„ç”»å¸ƒå°ºå¯¸ï¼Œå†…å®¹åœ¨ç”»å¸ƒå†…å¯¹é½
- **å‘½åè§„èŒƒ**ï¼šå¿…é¡»éµå¾ª `{skin_id}_{layer_name}.png` æ ¼å¼

### 3. å›¾å±‚è®¾è®¡å»ºè®®

- **desk**ï¼šæ¡Œé¢/èƒŒæ™¯ï¼Œç»˜åˆ¶åœ¨æœ€åº•å±‚
- **head**ï¼šå¤´éƒ¨ï¼ˆä¸å«è¡¨æƒ…ï¼‰ï¼Œç»˜åˆ¶åœ¨ desk ä¹‹ä¸Š
- **face**ï¼šæ­£å¸¸çŠ¶æ€çš„è¡¨æƒ…ï¼ˆççœ¼ï¼‰ï¼Œç»˜åˆ¶åœ¨ head ä¹‹ä¸Š
- **rest**ï¼šä¼‘æ¯çŠ¶æ€çš„è¡¨æƒ…ï¼ˆé—­çœ¼+è…®çº¢ï¼‰ï¼Œä¸ face ä½ç½®ç›¸åŒï¼Œä»…åœ¨ä¼‘æ¯æ—¶æ˜¾ç¤º
- **hand_left/right**ï¼šå·¦å³æ‰‹ï¼Œç»˜åˆ¶åœ¨æœ€ä¸Šå±‚ï¼ˆåŠ¨ç”»æ—¶ä¼šä¸Šä¸‹ç§»åŠ¨ï¼‰

## ğŸ”§ é…ç½®æ­¥éª¤

å‡†å¤‡å¥½èµ„æºåï¼Œå‘ AI åŠ©æ‰‹æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

### 1. åŸºæœ¬ä¿¡æ¯

```
çš®è‚¤ ID: your_skin_base
çš®è‚¤åç§°: Your Skin Name (Base)
æè¿°: Your skin description
ä¸»é¢˜è‰²: 0xFFE8D5C8  (ARGB æ ¼å¼ï¼Œç”¨äº UI é«˜äº®)
```

### 2. èµ„æºè·¯å¾„ç¡®è®¤

ç¡®è®¤èµ„æºæ–‡ä»¶ä½äºï¼š
```
assets/skins/your_skin_base/
  â”œâ”€â”€ your_skin_base_desk.png
  â”œâ”€â”€ your_skin_base_head.png
  â”œâ”€â”€ your_skin_base_face.png
  â”œâ”€â”€ your_skin_base_rest.png
  â”œâ”€â”€ your_skin_base_hand_left.png
  â”œâ”€â”€ your_skin_base_hand_right.png
  â””â”€â”€ your_skin_base.png (å¯é€‰ï¼Œé¢„è§ˆå›¾)
```

## ğŸ“ AI åŠ©æ‰‹å°†è‡ªåŠ¨å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»ºçš®è‚¤æ¨¡å—æ–‡ä»¶

åˆ›å»º `ui/skins/your_skin_base.lua`ï¼ŒåŒ…å«ï¼š

- âœ… å›¾å±‚æ–‡ä»¶è·¯å¾„é…ç½®
- âœ… å›¾å±‚åç§»é…ç½®ï¼ˆé»˜è®¤å…¨ä¸º 0ï¼Œç”± PNG å†…éƒ¨å†³å®šä½ç½®ï¼‰
- âœ… å ä½é¢œè‰²é…ç½®ï¼ˆå½“å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨ï¼‰
- âœ… ç²’å­ç³»ç»Ÿé…ç½®ï¼ˆçˆ±å¿ƒæ•ˆæœï¼‰
- âœ… Zzz åŠ¨ç”»é…ç½®ï¼ˆä¼‘æ¯çŠ¶æ€ï¼‰
- âœ… æ‰€æœ‰å¿…éœ€å‡½æ•°ï¼š
  - `init(ctx, script_path)` - åˆå§‹åŒ–
  - `update(dt, char_state, ctx)` - æ›´æ–°åŠ¨ç”»
  - `draw(ctx, dl, x, y, w, h, char_state, skip_overlay)` - ç»˜åˆ¶ä¸»å›¾å±‚
  - `draw_paws(ctx, dl, x, y, w, h)` - ç»˜åˆ¶æ‰‹å’Œç²’å­
  - `get_draw_rect()` - è·å–ç»˜åˆ¶åŒºåŸŸ
  - `get_recommended_size()` - è·å–æ¨èçª—å£å°ºå¯¸
  - `trigger_action(action_type, is_manual)` - è§¦å‘åŠ¨ä½œ
  - `get_particle_config()` / `set_particle_config()` - ç²’å­é…ç½®
  - `get_zzz_config()` / `set_zzz_config()` - Zzz åŠ¨ç”»é…ç½®
  - `get_last_manual_tap_time()` - è·å–æœ€åæ‰‹åŠ¨ç‚¹å‡»æ—¶é—´

### 2. æ³¨å†Œåˆ°çš®è‚¤ç®¡ç†å™¨

åœ¨ `ui/skins/skin_manager.lua` çš„ `skin_defs` æ•°ç»„ä¸­æ·»åŠ ï¼š

```lua
{
  id = "your_skin_base",
  name = "Your Skin Name (Base)",
  description = "Your skin description",
  module = "ui.skins.your_skin_base",
  accent = 0xFFE8D5C8,  -- ä¸»é¢˜è‰²
  preview_image = "your_skin_base.png",  -- é¢„è§ˆå›¾æ–‡ä»¶å
}
```

### 3. æ›´æ–°é¢„è§ˆå›¾è·¯å¾„é€»è¾‘

`main.lua` ä¸­çš„é¢„è§ˆå›¾è·¯å¾„é€»è¾‘å·²è‡ªåŠ¨æ”¯æŒ `*_base` æ ¼å¼çš„çš®è‚¤ IDï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ã€‚

## ğŸ¨ é»˜è®¤é…ç½®å€¼

### ç²’å­ç³»ç»Ÿï¼ˆçˆ±å¿ƒæ•ˆæœï¼‰

```lua
particle_config = {
  left_offset_x = 300,      -- å·¦æ‰‹çˆ±å¿ƒæ°´å¹³åç§»ï¼ˆé€»è¾‘åƒç´ ï¼‰
  right_offset_x = -300,    -- å³æ‰‹çˆ±å¿ƒæ°´å¹³åç§»ï¼ˆé€»è¾‘åƒç´ ï¼‰
  offset_y = -50,           -- çˆ±å¿ƒå‚ç›´åç§»ï¼ˆé€»è¾‘åƒç´ ï¼‰
  size_multiplier = 20.0,   -- çˆ±å¿ƒå¤§å°å€æ•°
}
```

### Zzz åŠ¨ç”»ï¼ˆä¼‘æ¯çŠ¶æ€ï¼‰

```lua
zzz_config = {
  base_size = 19.8,              -- Z çš„åŸºç¡€å¤§å°
  size_growth = 38.5,            -- Z çš„å¤§å°å¢é•¿é‡
  offset_x = 104.7,              -- Z ç›¸å¯¹äºè„¸éƒ¨çš„æ°´å¹³åç§»
  offset_y = -281.4,             -- Z ç›¸å¯¹äºè„¸éƒ¨çš„å‚ç›´åç§»
  spacing_x = 50.3,              -- å¤šä¸ª Z ä¹‹é—´çš„æ°´å¹³é—´è·
  move_speed_x = 57.8,           -- Z æ°´å¹³ç§»åŠ¨é€Ÿåº¦
  move_speed_y = 261.6,          -- Z å‚ç›´ç§»åŠ¨é€Ÿåº¦
  animation_speed = 0.8,         -- åŠ¨ç”»é€Ÿåº¦å€æ•°
  fade_start = 0.5,              -- æ·¡å‡ºå¼€å§‹æ¯”ä¾‹
  min_alpha = 0.4,               -- æœ€å°é€æ˜åº¦
  line_thickness_base = 2.0,     -- çº¿æ¡åŸºç¡€ç²—ç»†
  line_thickness_reduce = 0.5,   -- çº¿æ¡ç²—ç»†å‡å°‘é‡
  line_thickness_auto_scale = 0.15, -- çº¿æ¡ç²—ç»†è‡ªåŠ¨ç¼©æ”¾æ¯”ä¾‹
  face_offset_y = 0.0,           -- è„¸éƒ¨å‚ç›´åç§»
}
```

### åŠ¨ç”»å‚æ•°

- **æ‰‹éƒ¨ç‚¹å‡»å¹…åº¦**ï¼š60pxï¼ˆä¹˜ä»¥ scaleï¼‰
- **è¡¨æƒ…è·Ÿéšç³»æ•°**ï¼š0.4
- **è¡¨æƒ…è·Ÿéšé™åˆ¶**ï¼šæ°´å¹³ Â±80pxï¼Œå‚ç›´ Â±48px
- **æ¨èçª—å£å°ºå¯¸**ï¼š300x200

## ğŸ” éªŒè¯æ¸…å•

é…ç½®å®Œæˆåï¼Œè¯·éªŒè¯ï¼š

- [ ] çš®è‚¤å‡ºç°åœ¨å•†åº—/çš®è‚¤é€‰æ‹©ç•Œé¢
- [ ] é¢„è§ˆå›¾æ­£ç¡®æ˜¾ç¤º
- [ ] çš®è‚¤å¯ä»¥æ­£å¸¸åˆ‡æ¢
- [ ] æ‰€æœ‰å›¾å±‚æ­£ç¡®æ¸²æŸ“ï¼ˆdesk, head, face, handsï¼‰
- [ ] ä¼‘æ¯çŠ¶æ€æ˜¾ç¤º rest å›¾å±‚å’Œ Zzz åŠ¨ç”»
- [ ] ç‚¹å‡»æ—¶æ‰‹éƒ¨æœ‰åŠ¨ç”»æ•ˆæœ
- [ ] é¼ æ ‡ç§»åŠ¨æ—¶è¡¨æƒ…è·Ÿéš
- [ ] çˆ±å¿ƒç²’å­æ•ˆæœæ­£å¸¸
- [ ] å¼€å‘è€…é¢æ¿å¯ä»¥è°ƒæ•´ç²’å­å’Œ Zzz åŠ¨ç”»å‚æ•°

## ğŸ“š å‚è€ƒç¤ºä¾‹

- **cat_base**ï¼š`ui/skins/cat_base.lua` + `assets/skins/cat_base/`
- **bear_base**ï¼š`ui/skins/bear_base.lua` + `assets/skins/bear_base/`
- **rabbit_base**ï¼š`ui/skins/rabbit_base.lua` + `assets/skins/rabbit_base/`

## ğŸ› å¸¸è§é—®é¢˜

### Q: é¢„è§ˆå›¾ä¸æ˜¾ç¤ºï¼Ÿ

A: æ£€æŸ¥ï¼š
1. é¢„è§ˆå›¾æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`assets/skins/{skin_id}/{preview_image}`
2. `skin_manager.lua` ä¸­çš„ `preview_image` å­—æ®µæ˜¯å¦æ­£ç¡®
3. çš®è‚¤ ID æ˜¯å¦ä»¥ `_base` ç»“å°¾ï¼ˆè‡ªåŠ¨è·¯å¾„æ¨æ–­ï¼‰

### Q: å›¾å±‚é¡ºåºä¸å¯¹ï¼Ÿ

A: å›¾å±‚é¡ºåºåœ¨ `draw_composed_layers` å‡½æ•°ä¸­å®šä¹‰ï¼š
1. headï¼ˆå¤´éƒ¨ï¼‰
2. face/restï¼ˆè¡¨æƒ…ï¼Œæ ¹æ®çŠ¶æ€é€‰æ‹©ï¼‰
3. tableï¼ˆæ¡Œé¢ï¼‰
4. handsï¼ˆæ‰‹ï¼Œåœ¨ `draw_paws` ä¸­ç»˜åˆ¶ï¼‰
5. particlesï¼ˆç²’å­ï¼Œåœ¨ `draw_paws` ä¸­ç»˜åˆ¶ï¼‰

### Q: åŠ¨ç”»ä¸å·¥ä½œï¼Ÿ

A: æ£€æŸ¥ï¼š
1. `update` å‡½æ•°æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨
2. `char_state` å‚æ•°æ˜¯å¦æ­£ç¡®ä¼ é€’
3. æ‰‹éƒ¨åŠ¨ç”»çš„ `left_paw_y` / `right_paw_y` æ˜¯å¦æ›´æ–°

## ğŸ“ å¿«é€Ÿé…ç½®æ¨¡æ¿

å‘ AI åŠ©æ‰‹æä¾›ä»¥ä¸‹ä¿¡æ¯å³å¯ï¼š

```
è¯·ä¸ºæ–°çš®è‚¤é…ç½®ï¼š

çš®è‚¤ ID: {your_skin_id}
çš®è‚¤åç§°: {Your Skin Name}
æè¿°: {Description}
ä¸»é¢˜è‰²: {0xRRGGBBAA}
èµ„æºè·¯å¾„: assets/skins/{your_skin_id}/

å·²å‡†å¤‡çš„æ–‡ä»¶ï¼š
- {your_skin_id}_desk.png
- {your_skin_id}_head.png
- {your_skin_id}_face.png
- {your_skin_id}_rest.png
- {your_skin_id}_hand_left.png
- {your_skin_id}_hand_right.png
- {your_skin_id}.png (é¢„è§ˆå›¾)
```

AI åŠ©æ‰‹å°†è‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®å·¥ä½œã€‚

